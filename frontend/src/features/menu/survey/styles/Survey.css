@import "../../../../themes/variables.css";

/* ======================================================
   SURVEY VIEWER — Polished, Clean, Responsive, Light-first
   ====================================================== */

/* ---------- Design Tokens (local-only) ---------- */
.svr-wrap{
  --svr-radius: 18px;
  --svr-pad: 18px;
  --svr-gap: 12px;

  --svr-border: #e5e7eb;        /* neutral border */
  --svr-border-soft: #eef0f2;   /* softer border */
  --svr-surface: #ffffff;       /* pure card */
  --svr-soft: #f8fafc;          /* soft panel */
  --svr-soft-2: #f3f6fb;        /* hover panel */

  --svr-ink: var(--color-text, #0f172a);
  --svr-ink-weak: #475569;
  --svr-ink-muted: #64748b;
  --svr-placeholder: #9aa6b2;

  --svr-accent: var(--color-primary, #10b981);
  --svr-accent-2: #34d399;
  --svr-accent-weak: rgba(16, 124, 16, 0.12);

  --svr-danger: #dc2626;
  --svr-success-ink: #065f46;
  --svr-success-bg: #d1fae5;
  --svr-success-br: #a7f3d0;
  --svr-error-ink: #b91c1c;
  --svr-error-bg: #fee2e2;
  --svr-error-br: #fecaca;

  --svr-shadow-1: 0 0 0 2px rgba(16,124,16,.06) inset,
                  0 10px 28px rgba(16,124,16,.10),
                  0 2px 8px rgba(0,0,0,.04);
  --svr-shadow-2: 0 4px 16px rgba(2,6,23,.06);
  --svr-shadow-3: 0 6px 18px rgba(16,124,16,.12);

  /* Layout helpers */
  --svr-max: 1000px;
}

/* Top bar styling */
.survey-page .pd-topbar {
  background: var(--color-white);
  border-bottom: 1px solid #e9e9e9;
  padding: 14px 20px;
  display: flex;
  align-items: center;
  justify-content: space-between;
}

.survey-page .pd-main {
  display: flex;
  justify-content: center;
  align-items: flex-start;
  padding: 22px;
  min-height: 0;
}

/* ---------- Wrapper (gradient border, white surface) ---------- */
.svr-wrap {
  background:
    linear-gradient(var(--svr-surface), var(--svr-surface)) padding-box,
    linear-gradient(135deg, var(--svr-accent-2), var(--svr-accent), #a7f3d0) border-box;
  border: 1px solid transparent;
  border-radius: var(--svr-radius);
  padding: var(--svr-pad);
  width: 100%;
  max-width: var(--svr-max);
  margin-inline: auto;
  box-shadow: var(--svr-shadow-1);
  
}

/* ---------- Header ---------- */
.svr-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: var(--svr-gap);
  margin-bottom: 14px;
}

.svr-title {
  display: inline-flex;
  align-items: center;
  gap: 10px;
  color: var(--svr-ink);
}

.svr-title .pd-svg { width: 20px; height: 20px; }

.svr-title-icon {
  width: 22px;
  height: 22px;
  display: block;
  object-fit: contain;
}

.svr-title-text {
  font-weight: 800;
  font-size: 20px;
  line-height: 1.1;
  letter-spacing: .2px;
  margin-top: -1px;
}

.svr-header-actions {
  display: flex;
  gap: 8px;
  flex-wrap: wrap;
}

/* ---------- Buttons ---------- */
.svr-btn {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 8px;
  padding: 10px 18px;
  border-radius: 8px;
  border: 1px solid #e2e8f0;
  background: #f8fafc;
  color: #64748b;
  font-weight: 500;
  cursor: pointer;
  transition: all 0.2s;
  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.05);
}
.svr-btn:hover {
  background: #eef2f7;
  border-color: #dfe5ee;
  box-shadow: 0 6px 14px rgba(2,6,23,.06);
}
.svr-btn:active { transform: translateY(1px); }
.svr-btn:disabled { opacity: .6; cursor: not-allowed; }
.svr-btn.ghost { background: #ffffff; }

.svr-btn .pd-icon-img {
  width: 18px; height: 18px; display: block; object-fit: contain;
  transition: transform .2s ease;
}
.svr-btn:hover .pd-icon-img { transform: scale(1.06); }

/* ---------- Content Grid ---------- */
.svr-list {
  display: grid;
  grid-template-columns: 1fr;
  gap: 12px;
}

/* Auto-fit ke 2–4 kolom di layar lebar */
@media (min-width: 768px){
  .svr-list{
    grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
  }
}

/* ---------- Card / Item ---------- */
.svr-item {
  border: 1px solid var(--svr-border-soft);
  border-radius: 14px;
  background: var(--svr-soft);
  padding: 14px;
  transition: border-color .15s ease, box-shadow .15s ease, background .15s ease, transform .12s ease;
  position: relative;
  overflow: clip;
}
.svr-item:hover {
  border-color: #e1e7f2;
  background: var(--svr-soft-2);
  box-shadow: var(--svr-shadow-2);
  transform: translateY(-1px);
}

/* Accent bar halus di kiri */
.svr-item::before{
  content:"";
  position:absolute; inset:0 0 0 0;
  border-left: 3px solid color-mix(in srgb, var(--svr-accent) 30%, transparent);
  border-radius: inherit;
  pointer-events:none;
}

/* ---------- Question Text ---------- */
.svr-qtext {
  font-weight: 700;
  color: var(--svr-ink);
  margin-bottom: 10px;
  line-height: 1.25;
  word-wrap: break-word;
}
.svr-required { color: var(--svr-danger); margin-left: 6px; }

/* ---------- Options (radio/checkbox) ---------- */
.svr-options {
  display: grid;
  grid-template-columns: 1fr;
  gap: 8px;
}
@media (min-width: 720px){
  .svr-options{
    grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
  }
}

.svr-opt {
  display: inline-flex;
  align-items: center;
  gap: 10px;
  padding: 10px 12px;
  border: 1px solid var(--svr-border);
  border-radius: 12px;
  background: #fff;
  color: var(--svr-ink);
  transition: border-color .15s ease, box-shadow .15s ease, background .15s ease, transform .08s ease;
}
.svr-opt:hover {
  border-color: #dfe4ea;
  background: #fafcff;
  box-shadow: 0 4px 10px rgba(2,6,23,.05);
}
.svr-opt:active{ transform: translateY(1px); }
.svr-opt input { accent-color: var(--svr-accent); }

/* Highlight state saat checked (modern browsers) */
.svr-opt:has(input:checked){
  border-color: color-mix(in srgb, var(--svr-accent) 42%, #cdeacd);
  background: color-mix(in srgb, var(--svr-accent) 10%, #ffffff);
  box-shadow: 0 4px 12px rgba(16,124,16,.10);
}

/* ---------- Rating (opsional) ---------- */
.svr-rating { display: inline-flex; gap: 6px; }
.svr-star {
  width: 36px; height: 36px; border-radius: 10px;
  border: 1px solid var(--svr-border);
  background: #fff; cursor: pointer; font-size: 16px; line-height: 1;
  transition: background .15s ease, border-color .15s ease, transform .05s ease, box-shadow .15s ease;
}
.svr-star:hover { background: #f8fafc; box-shadow: 0 3px 8px rgba(2,6,23,.06); }
.svr-star:active { transform: translateY(1px); }
.svr-star.is-on {
  background: color-mix(in srgb, var(--svr-accent) 12%, #fff);
  border-color: #cdeacd;
}

/* ---------- Text Inputs ---------- */
.svr-text {
  width: 100%;
  border: 1px solid var(--svr-border);
  border-radius: 12px;
  padding: 10px 14px;                 /* fixed: proper padding */
  background: #fff;
  color: var(--svr-ink);
  font: inherit;
  resize: vertical;
  transition: border-color .15s ease, box-shadow .15s ease, background .15s ease, color .15s ease;
}
.svr-text::placeholder{ color: var(--svr-placeholder); }
.svr-text:focus {
  outline: none;
  border-color: var(--svr-accent);
  box-shadow: 0 0 0 3px var(--svr-accent-weak);
  background: #ffffff;
}

/* ---------- Messages ---------- */
.svr-msg {
  margin-top: 10px;
  padding: 12px 14px;
  border-radius: 12px;
  border: 1px solid var(--svr-border);
  background: #fff;
  color: var(--svr-ink);
}
.svr-msg.ok {
  color: var(--svr-success-ink);
  background: var(--svr-success-bg);
  border-color: var(--svr-success-br);
}
.svr-msg.err {
  color: var(--svr-error-ink);
  background: var(--svr-error-bg);
  border-color: var(--svr-error-br);
}

/* ---------- Actions / Submit ---------- */
.svr-actions {
  display: flex;
  justify-content: flex-end;
  margin-top: 14px;
  gap: 10px;
  flex-wrap: wrap;
}

.svr-submit {
  display: inline-flex;
  align-items: center;
  gap: 8px;
  background: var(--svr-accent);
  color: #fff;
  border: 0;
  padding: 10px 14px;
  border-radius: 12px;
  cursor: pointer;
  transition: background .15s ease, transform .05s ease, box-shadow .15s ease;
  box-shadow: 0 0 0 0 rgba(0,0,0,0);
}
.svr-submit:hover {
  background: var(--color-primary-hover, #0da471);
  box-shadow: var(--svr-shadow-3);
}
.svr-submit:active { transform: translateY(1px); }
.svr-submit .pd-svg { width: 18px; height: 18px; }

/* Opsional: jadikan sticky di bawah jika perlu (tambahkan class "sticky" di HTML) */
.svr-actions.sticky{
  position: sticky;
  bottom: 0;
  background: linear-gradient(180deg, rgba(255,255,255,0), #fff 40%);
  padding-top: 10px;
}

/* ---------- Empty State (kompatibel dengan .pd-empty) ---------- */
.pd-empty,
.svr-empty{
  display:flex; align-items:center; justify-content:center;
  min-height: 120px;
  color: var(--svr-ink-weak);
  background: var(--svr-soft);
  border: 1px dashed var(--svr-border);
  border-radius: 12px;
  padding: 16px;
}

/* ---------- Responsiveness ---------- */
@media (max-width: 640px) {
  .svr-wrap { padding: 16px; border-radius: 16px; }
  .svr-header { flex-direction: column; align-items: stretch; gap: 10px; }
  .svr-header-actions { justify-content: space-between; }
  .svr-item{ padding: 12px; }
  .svr-title-text { font-size: 19px; }
}
@media (min-width: 641px) {
  .svr-title-text { font-size: 21px; }
}

/* ---------- Accessibility ---------- */
.svr-btn:focus-visible,
.svr-submit:focus-visible,
.svr-opt:focus-within,
.svr-star:focus-visible,
.svr-text:focus-visible {
  outline: 2px solid rgba(16, 124, 16, 0.35);
  outline-offset: 2px;
  border-radius: 12px;
}

/* ---------- Polishing ---------- */
/* smooth scrollbar (webkit) */
.svr-wrap *::-webkit-scrollbar{ height:10px; width:10px; }
.svr-wrap *::-webkit-scrollbar-thumb{
  background: #d7e7e0; border-radius:10px; border:2px solid #f1f5f4;
}
.svr-wrap *::-webkit-scrollbar-thumb:hover{ background:#c9e0d7; }

/* reduced motion */
@media (prefers-reduced-motion: reduce){
  .svr-btn, .svr-item, .svr-opt, .svr-star, .svr-text, .svr-submit{ transition:none !important; }
}

/* ---------- Optional Dark Theme (OPT-IN via .theme-dark on parent)
   Default-nya TIDAK mengikuti OS. Card tetap putih.
   Aktifkan hanya jika kamu menambah class .theme-dark di container. ---------- */
.theme-dark .svr-wrap{
  background:
    linear-gradient(#0e1614, #0e1614) padding-box,
    linear-gradient(135deg, #22c792, #0e9f77, #93e6c8) border-box;
  box-shadow: none;
}
.theme-dark .svr-title,
.theme-dark .svr-title-text,
.theme-dark .svr-qtext{ color:#eaf7f2; }
.theme-dark .svr-item{
  background:#0f201b; border-color:#19362d;
}
.theme-dark .svr-item:hover{ background:#13261f; border-color:#1f4a3d; }
.theme-dark .svr-opt{ background:#10221c; border-color:#1b3a30; color:#dfeee8; }
.theme-dark .svr-text{ background:#0f221c; border-color:#1c3d33; color:#eaf7f2; }
.theme-dark .svr-msg.ok{ color:#baf7e2; background:#0f2a22; border-color:#1d5a49; }
.theme-dark .svr-msg.err{ color:#ffd5d5; background:#2a1414; border-color:#5a1d1d; }

/* ---------- Small Button Variant ---------- */
.svr-btn.sm {
  padding: 6px 10px;
  border-radius: 10px;
  font-size: 13px;
  line-height: 1.1;
}
.svr-btn.sm .pd-icon-img { width: 16px; height: 16px; }
.svr-btn .pd-icon-img{
  width:18px; height:18px; display:block; object-fit:contain;
  transition: transform .2s ease;
}
.svr-btn:hover .pd-icon-img{ transform: scale(1.06); }
.svr-submit .pd-icon-img,
.svr-btn .pd-icon-img {
  width: 18px;
  height: 18px;
  display: block;
  object-fit: contain;
}
